<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Safalta Express Boys Hostel | The Legacy of Begusarai</title>
    <meta name="theme-color" content="#000000">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;700;900&family=Orbitron:wght@500;700;900&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind & PDF Lib -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <style>
        :root { --neon-blue: #00f3ff; --neon-purple: #bc13fe; --gold: #ffd700; --void: #030303; --danger: #ff003c; --success: #00ff66; }
        body { background-color: var(--void); font-family: 'Outfit', sans-serif; color: white; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
        
        .font-cyber { font-family: 'Orbitron', sans-serif; }
        .glass-panel { background: rgba(12, 12, 18, 0.85); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.8); }
        .tilt-card { transition: transform 0.2s; transform-style: preserve-3d; perspective: 1000px; }
        .tilt-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 0 30px rgba(0, 243, 255, 0.2); border-color: var(--neon-blue); }
        .strike-diagonal { position: relative; display: inline-block; color: #6b7280; }
        .strike-diagonal::after { content: ''; position: absolute; top: 50%; left: -10%; width: 120%; height: 3px; background: var(--danger); transform: rotate(-15deg); }
        .scroll-reveal { opacity: 0; transform: translateY(50px); transition: all 0.8s ease; }
        .scroll-reveal.visible { opacity: 1; transform: translateY(0); }
        
        /* Sidebar & Modals */
        .sidebar { position: fixed; top: 0; left: 0; width: 320px; height: 100%; background: #050505; border-right: 1px solid rgba(255,255,255,0.1); transform: translateX(-100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); z-index: 3000; box-shadow: 10px 0 50px rgba(0,0,0,0.8); }
        .sidebar.open { transform: translateX(0); }
        .app-modal { position: fixed; inset: 0; z-index: 2500; background: rgba(5, 5, 5, 0.98); backdrop-filter: blur(10px); overflow-y: auto; animation: slideUp 0.4s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

        /* Loader */
        #loader { position: fixed; inset: 0; background: #000; z-index: 10000; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: #000; }
        ::-webkit-scrollbar-thumb { background: var(--neon-blue); border-radius: 4px; }

        /* AI Loading Animation */
        .ai-pulse { animation: aiPulse 1.5s infinite; }
        @keyframes aiPulse { 0% { opacity: 0.5; } 50% { opacity: 1; text-shadow: 0 0 10px var(--neon-purple); } 100% { opacity: 0.5; } }
    </style>

    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.344.0?external=react",
                "firebase/app": "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js",
                "firebase/auth": "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js",
                "firebase/firestore": "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js"
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            Phone, MapPin, Wifi, Zap, ShieldCheck, Utensils, 
            Home, Menu, X, CheckCircle, Smartphone, 
            Send, Coffee, BookOpen, Library, GraduationCap,
            User, Star, Factory, Building2, LogIn, LogOut,
            LayoutDashboard, Brain, Sparkles, MessageSquare, Settings,
            Headphones, Music, Pause, Play, Instagram, Flame, Timer, Calendar,
            ExternalLink, UserPlus, Users, PenTool, Save, Trash2, FileText, Download,
            Lightbulb, Leaf, Clock, List, ShieldAlert, ListTodo, FileUp, Trophy, Activity,
            Mic, PieChart, Ban, Layers, Mail, Plus, Check, Lock, BookMarked
        } from 'lucide-react';
        import { initializeApp } from "firebase/app";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signOut, onAuthStateChanged } from "firebase/auth";
        import { getFirestore, collection, addDoc, query, orderBy, limit, onSnapshot, serverTimestamp, doc, updateDoc, deleteDoc, getDocs, where } from "firebase/firestore";

        // --- CONFIG ---
        const firebaseConfig = {
            apiKey: "AIzaSyBbwul_dbciJX3SQIVFQqXktmCsCghJRHU",
            authDomain: "safalta-express-boys-hostel.firebaseapp.com",
            projectId: "safalta-express-boys-hostel",
            storageBucket: "safalta-express-boys-hostel.firebasestorage.app",
            messagingSenderId: "943963131070",
            appId: "1:943963131070:web:48db2233c27d7ae15562ef"
        };
        const INSTAGRAM_URL = "https://www.instagram.com/safalta_express_boys_hostel?igsh=MXZyZGdvOXFldnUxNA==";
        const OWNER_EMAIL = "riteshs9122@gmail.com";
        const APP_ID = 'safalta-endgame-v1';

        let app, auth, db;
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
        } catch (e) { console.error("Init Error", e); }
        const googleProvider = new GoogleAuthProvider();

        // --- GEMINI API HELPER ---
        const callGemini = async (prompt) => {
            const apiKey = "AIzaSyC_En6UKkE0t6vClrA08mTk4ZNwOhkusD8"; 
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: prompt }] }]
                    })
                });
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "AI Busy. Try again.";
            } catch (error) {
                console.error(error);
                return "AI Connection Failed.";
            }
        };

        // --- IMAGES ---
        const IMG = {
            hero: "https://images.unsplash.com/photo-1555854877-bab0e564b8d5?q=80&w=1200", 
            poha: "https://www.indianhealthyrecipes.com/wp-content/uploads/2021/08/poha-recipe.jpg",
            paratha: "https://www.vegrecipesofindia.com/wp-content/uploads/2009/08/aloo-paratha-recipe-1.jpg",
            puri: "https://www.archanaskitchen.com/images/archanaskitchen/1-Author/Pooja_Thakur/Puri_Bhaji_Recipe.jpg",
            chicken: "https://www.licious.in/blog/wp-content/uploads/2020/12/Chicken-Curry.jpg",
            paneer: "https://www.indianhealthyrecipes.com/wp-content/uploads/2021/03/matar-paneer.jpg",
            dal: "https://www.vegrecipesofindia.com/wp-content/uploads/2021/06/dal-tadka-recipe-1.jpg",
            kadhi: "https://www.vegrecipesofindia.com/wp-content/uploads/2012/05/kadhi-chawal-1.jpg",
            khichri: "https://www.vegrecipesofindia.com/wp-content/uploads/2012/01/masala-khichdi-recipe-1.jpg",
            roti: "https://www.secondrecipe.com/wp-content/uploads/2017/08/roti-chapati-1.jpg",
            kheer: "https://www.cookwithmanali.com/wp-content/uploads/2014/07/Rice-Kheer.jpg",
            room1: "https://images.unsplash.com/photo-1522771753033-6a586b911b3e?q=80&w=800",
            room2: "https://images.unsplash.com/photo-1584622050111-993a426fbf0a?q=80&w=800",
            room3: "https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?q=80&w=800"
        };

        const MENU = {
            Monday: { b: "Poha, Achar", b_img: IMG.poha, l: "Chicken/Paneer", l_img: IMG.chicken, d: "Roti-Sabji", d_img: IMG.roti },
            Tuesday: { b: "Roti-Sabji", b_img: IMG.roti, l: "Dal-Sabji", l_img: IMG.dal, d: "Puri-Kheer", d_img: IMG.kheer },
            Wednesday: { b: "Aloo Paratha", b_img: IMG.paratha, l: "Dal-Sabji", l_img: IMG.dal, d: "Roti-Sabji", d_img: IMG.roti },
            Thursday: { b: "Puri-Rajma", b_img: IMG.puri, l: "Dal-Bhujiya", l_img: IMG.dal, d: "Roti-Mix Veg", d_img: IMG.paneer },
            Friday: { b: "Roti-Sabji", b_img: IMG.roti, l: "Egg/Paneer", l_img: IMG.chicken, d: "Roti-Sabji", d_img: IMG.roti },
            Saturday: { b: "Roti-Sabji", b_img: IMG.roti, l: "Khichri-Chokha", l_img: IMG.khichri, d: "Puri-Sewai", d_img: IMG.puri },
            Sunday: { b: "Sattu Paratha", b_img: IMG.paratha, l: "Kadhi-Chawal", l_img: IMG.kadhi, d: "Roti-Bhujiya", d_img: IMG.roti },
        };

        const LEGACY_SPOTS = [
            {n:"GD College Campus", d:"50m Campus", i:GraduationCap},
            {n:"Kaushal Commerce", d:"Coaching", i:BookOpen},
            {n:"Trinity Classes", d:"Study Hub", i:Library},
            {n:"Barauni Ind.", d:"Industrial", i:Factory},
            {n:"Readers Lib", d:"24/7 Books", i:Building2}
        ];

        // --- COMPONENTS ---

        const Navbar = ({ user, login, toggleSidebar }) => React.createElement('nav', { className: "fixed top-0 w-full z-50 glass-panel px-4 py-3 flex justify-between items-center border-b border-white/10" },
            React.createElement('div', { className: "flex items-center gap-4" },
                React.createElement('button', { onClick: toggleSidebar, className: "text-white p-2 hover:bg-white/10 rounded-full transition" }, React.createElement(Menu, { size: 28 })),
                React.createElement('div', { className: "flex items-center gap-3 cursor-pointer group", onClick: () => window.scrollTo(0,0) },
                    React.createElement('div', { className: "bg-gradient-to-r from-blue-600 to-purple-600 p-2 rounded-xl shadow-lg" },
                        React.createElement(GraduationCap, { className: "text-white", size: 24 })
                    ),
                    React.createElement('div', null,
                        React.createElement('h1', { className: "font-cyber text-lg font-black leading-none text-white tracking-wide" }, "SAFALTA"),
                        React.createElement('p', { className: "text-[9px] tracking-[0.3em] text-blue-400 font-bold" }, "BOYS HOSTEL")
                    )
                )
            ),
            React.createElement('div', { className: "flex gap-3 items-center" },
                React.createElement('a', { href: INSTAGRAM_URL, target: "_blank", className: "bg-gradient-to-tr from-yellow-400 via-red-500 to-purple-500 p-2 rounded-full text-white shadow-lg animate-pulse hover:scale-110 transition" }, React.createElement(Instagram, { size: 18 })),
                !user ? React.createElement('button', { onClick: login, className: "bg-white text-black px-4 py-2 rounded-lg text-xs font-black uppercase tracking-wider hover:bg-gray-200 transition" }, "LOGIN") 
                      : React.createElement('img', { src: user.photoURL, className: "w-8 h-8 rounded-full border border-blue-500" })
            )
        );

        const Sidebar = ({ isOpen, close, user, logout, openApp }) => React.createElement('div', { className: `sidebar ${isOpen ? 'open' : ''} flex flex-col p-6` },
            React.createElement('div', { className: "flex justify-between items-center mb-10" },
                React.createElement('h2', { className: "font-cyber text-xl text-blue-400 tracking-widest" }, "DIGITAL CAMPUS"),
                React.createElement('button', { onClick: close, className: "text-gray-400 hover:text-white" }, React.createElement(X, {size: 28}))
            ),
            React.createElement('div', { className: "space-y-2 flex-1 overflow-y-auto pr-2" },
                [
                    {cat: "ACADEMICS", items: [
                        {n:"Omni Tutor (AI)", i:Brain, id:"omni", c:"text-purple-400"},
                        {n:"Flash Forge (AI)", i:Zap, id:"flash", c:"text-yellow-400"},
                        {n:"Orbit Planner (AI)", i:Calendar, id:"planner", c:"text-blue-400"},
                        {n:"Mistake Vault", i:BookMarked, id:"mistake", c:"text-red-400"}
                    ]},
                    {cat: "FOCUS & HABITS", items: [
                        {n:"Zenith Growth", i:Leaf, id:"forest", c:"text-green-500"},
                        {n:"Sonic Core", i:Headphones, id:"music", c:"text-pink-400"},
                        {n:"Mind Firewall", i:ShieldAlert, id:"detox", c:"text-orange-400"}
                    ]},
                    {cat: "TOOLS", items: [
                        {n:"Neural Notes (AI)", i:FileText, id:"notes", c:"text-white"},
                        {n:"Whiteboard", i:PenTool, id:"whiteboard", c:"text-white"},
                        {n:"Nexus Logs", i:ListTodo, id:"ledger", c:"text-green-400"},
                        {n:"Group Chat", i:MessageSquare, id:"chat", c:"text-indigo-400"}
                    ]}
                ].map((section, idx) => 
                    React.createElement('div', { key: idx, className: "mb-6" },
                        React.createElement('h3', { className: "text-[10px] font-bold text-gray-500 uppercase tracking-widest mb-3 ml-2" }, section.cat),
                        section.items.map(item =>
                            React.createElement('button', { key: item.id, onClick: () => { close(); openApp(item.id); }, className: "flex items-center gap-4 text-gray-300 hover:text-white hover:bg-white/10 p-3 rounded-xl w-full transition border border-transparent hover:border-white/10 group" },
                                React.createElement(item.i, { size: 18, className: item.c + " group-hover:scale-110 transition" }), 
                                React.createElement('span', { className: "font-bold text-sm tracking-wide" }, item.n)
                            )
                        )
                    )
                )
            ),
            user ? React.createElement('button', { onClick: logout, className: "mt-4 flex items-center gap-2 text-red-500 p-4 hover:bg-red-500/10 rounded-xl justify-center font-bold border border-red-500/20" }, React.createElement(LogOut, { size: 18 }), "LOGOUT SYSTEM") 
                 : React.createElement('div', { className: "mt-4 text-xs text-center text-gray-500 p-4 border border-white/5 rounded-xl" }, "Login required to access Apps")
        );

        const Hero = () => React.createElement('section', { className: "h-screen flex flex-col justify-center items-center text-center relative overflow-hidden" },
            React.createElement('div', { className: "absolute inset-0 bg-black" },
                React.createElement('img', { src: IMG.hero, className: "absolute inset-0 w-full h-full object-cover opacity-30 animate-pulse" }),
                React.createElement('div', { className: "absolute inset-0 bg-gradient-to-t from-[#030303] via-black/50 to-transparent" })
            ),
            React.createElement('div', { className: "relative z-10 px-6 max-w-4xl" },
                React.createElement('div', { className: "inline-block mb-6 px-4 py-1.5 rounded-full glass-panel border border-blue-500/30 text-blue-400 text-[10px] font-black tracking-[0.2em] uppercase animate-float" }, "ðŸ† Managed by Ritesh Kumar"),
                React.createElement('h1', { className: "font-cyber text-5xl md:text-8xl mb-6 text-white leading-tight text-glow" }, "STUDY", React.createElement('br'), React.createElement('span', { className: "text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500" }, "ELITE")),
                React.createElement('p', { className: "text-lg text-gray-300 mb-10 font-light" }, "Behind GD College, Begusarai. The ultimate ecosystem for serious aspirants."),
                React.createElement('div', { className: "flex flex-col sm:flex-row gap-4 justify-center" },
                    React.createElement('button', { onClick: () => document.getElementById('booking').scrollIntoView({behavior:'smooth'}), className: "bg-blue-600 px-8 py-4 rounded-xl font-bold text-white shadow-lg hover:scale-105 transition" }, "BOOK SEAT NOW"),
                    React.createElement('a', { href: "tel:9122802016", className: "glass-panel border border-white/20 px-8 py-4 rounded-xl font-bold text-white hover:bg-white/10 transition flex items-center justify-center gap-2" }, React.createElement(Phone, {size:18}), "CALL NOW")
                )
            )
        );

        const LegacySection = () => React.createElement('section', { id: "legacy", className: "py-20 px-4 bg-[#050505] scroll-reveal" },
            React.createElement('div', { className: "max-w-7xl mx-auto" },
                React.createElement('h2', { className: "font-cyber text-3xl text-center mb-12 text-white" }, "LOCATION RADAR"),
                React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-5 gap-4" },
                    LEGACY_SPOTS.map((s,i) => React.createElement('div', { key: i, className: "glass-panel p-6 rounded-2xl text-center hover:border-blue-500/50 transition tilt-card" },
                        React.createElement('div', { className: "bg-white/5 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3 text-blue-400" }, React.createElement(s.i, {size:24})),
                        React.createElement('h4', { className: "font-bold text-sm" }, s.n),
                        React.createElement('p', { className: "text-xs text-gray-500" }, s.d)
                    ))
                )
            )
        );

        const FoodMenu = () => {
            const [day, setDay] = useState('Monday');
            return React.createElement('section', { id: "menu", className: "py-20 px-4 bg-[#080808] scroll-reveal" },
                React.createElement('div', { className: "max-w-6xl mx-auto" },
                    React.createElement('h2', { className: "font-cyber text-3xl text-center mb-10 text-white" }, "BRAIN FUEL"),
                    React.createElement('div', { className: "flex gap-3 overflow-x-auto pb-6 scrollbar-hide mb-8 px-2" }, 
                        Object.keys(MENU).map(d => React.createElement('button', { key: d, onClick: () => setDay(d), className: `px-6 py-2 rounded-lg font-black text-xs uppercase whitespace-nowrap transition-all ${day === d ? 'bg-yellow-500 text-black shadow-lg scale-105' : 'glass-panel text-gray-400 border-white/10'}` }, d))
                    ),
                    React.createElement('div', { className: "grid md:grid-cols-3 gap-6" },
                        [{t:"BREAKFAST", i:MENU[day].b_img, n:MENU[day].b, time:"8:30 AM"}, 
                         {t:"LUNCH", i:MENU[day].l_img, n:MENU[day].l, time:"1:00 PM"}, 
                         {t:"DINNER", i:MENU[day].d_img, n:MENU[day].d, time:"8:30 PM"}].map((m, idx) => 
                            React.createElement('div', { key: idx, className: "glass-panel p-5 rounded-3xl border-t-4 border-yellow-500 tilt-card" },
                                React.createElement('div', { className: "relative h-48 rounded-2xl overflow-hidden mb-4" },
                                    React.createElement('img', { src: m.i, className: "w-full h-full object-cover", onError: (e)=>{e.target.src=IMG.thali} }),
                                    React.createElement('div', { className: "absolute top-2 left-2 bg-black/70 px-3 py-1 rounded-lg text-[10px] font-bold text-yellow-400 backdrop-blur-md" }, m.t)
                                ),
                                React.createElement('h4', { className: "text-xl font-bold text-white" }, m.n),
                                React.createElement('p', { className: "text-xs text-gray-500 mt-1" }, m.time)
                            )
                        )
                    )
                )
            );
        };

        const RoomSection = () => React.createElement('section', { className: "py-24 px-4 bg-black scroll-reveal" },
            React.createElement('div', { className: "max-w-7xl mx-auto" },
                React.createElement('h2', { className: "font-cyber text-3xl text-center mb-16 text-white" }, "STUDENT SUITES"),
                React.createElement('div', { className: "grid md:grid-cols-3 gap-8" },
                    [IMG.room1, IMG.room2, IMG.room3].map((src, i) => 
                        React.createElement('div', { key: i, className: "h-64 glass-panel rounded-3xl overflow-hidden group border border-white/10 tilt-card" },
                            React.createElement('img', { src, className: "w-full h-full object-cover transition duration-700 group-hover:scale-110 opacity-70 group-hover:opacity-100" })
                        )
                    )
                )
            )
        );

        const Booking = () => {
            const [showModal, setShowModal] = useState(false);
            const handlePay = () => {
                window.location.href = "upi://pay?pa=riteshs9122@ybl&pn=SafaltaExpress&am=4000&cu=INR&tn=HostelSeatBooking";
                setTimeout(() => setShowModal(true), 2000);
            };
            return React.createElement('section', { id: "booking", className: "py-24 px-4 bg-[#080808] relative scroll-reveal" },
                React.createElement('div', { className: "max-w-xl mx-auto glass-panel p-8 md:p-12 rounded-[3rem] text-center border border-blue-500/30 shadow-[0_0_50px_rgba(37,99,235,0.1)] relative overflow-hidden" },
                    React.createElement('div', { className: "absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-500 to-purple-500" }),
                    React.createElement('div', { className: "bg-red-600 text-white text-[10px] font-black px-4 py-1 rounded inline-block mb-6 animate-pulse" }, "LIMITED SEATS LEFT"),
                    React.createElement('h2', { className: "font-cyber text-4xl mb-6" }, "ELITE PLAN"),
                    
                    React.createElement('div', { className: "flex flex-col items-center mb-10" },
                        React.createElement('span', { className: "text-gray-500 text-2xl strike-diagonal font-bold font-mono" }, "â‚¹5500"),
                        React.createElement('span', { className: "text-7xl font-cyber text-white text-glow tracking-tighter mt-2" }, "â‚¹4000"),
                        React.createElement('span', { className: "text-blue-400 text-xs tracking-[0.2em] font-bold uppercase mt-2" }, "/ MONTH (ALL INCLUSIVE)")
                    ),
                    React.createElement('div', { className: "grid grid-cols-2 gap-4 text-left mb-10" },
                        ["3-Time Meals", "24/7 Power", "RO Water", "Furnished"].map(f => React.createElement('div', { key: f, className: "flex items-center gap-2 text-gray-300 text-sm font-bold" }, React.createElement(CheckCircle, { size: 16, className: "text-green-500" }), f))
                    ),
                    React.createElement('button', { onClick: handlePay, className: "w-full bg-gradient-to-r from-blue-600 to-purple-600 py-5 rounded-2xl font-black text-xl hover:scale-105 transition shadow-xl" }, "PAY â‚¹4000 NOW"),
                    React.createElement('p', { className: "text-gray-600 text-[10px] mt-4 font-bold uppercase" }, "Official UPI: riteshs9122@ybl")
                ),
                showModal && React.createElement('div', { className: "fixed inset-0 z-[100] flex items-center justify-center bg-black/90 backdrop-blur-md p-4 animate-float" },
                    React.createElement('div', { className: "bg-[#111] border border-white/20 rounded-[2rem] p-8 max-w-sm w-full text-center shadow-2xl" },
                        React.createElement(CheckCircle, { size: 60, className: "text-green-500 mx-auto mb-6" }),
                        React.createElement('h3', { className: "text-2xl font-black text-white mb-2" }, "PAYMENT INITIATED"),
                        React.createElement('p', { className: "text-gray-400 text-sm mb-8 leading-relaxed" }, "To confirm your seat instantly, please send the payment screenshot to Ritesh Sir on WhatsApp."),
                        React.createElement('a', { href: `https://wa.me/919122802016?text=${encodeURIComponent(`Hi Ritesh Sir, I've paid â‚¹4000 for Safalta Express seat. Here is the screenshot.`)}`, className: "block w-full bg-[#25D366] py-4 rounded-xl font-bold flex items-center justify-center gap-2 text-white hover:bg-[#1ebc59]" }, React.createElement(Send, { size: 18 }), "SEND SCREENSHOT"),
                        React.createElement('button', { onClick: () => setShowModal(false), className: "mt-6 text-xs text-red-500 font-bold tracking-widest" }, "CLOSE")
                    )
                )
            );
        };

        const Footer = () => React.createElement('footer', { className: "py-20 px-4 bg-black border-t border-white/10" },
            React.createElement('div', { className: "max-w-4xl mx-auto text-center" },
                React.createElement('h3', { className: "font-cyber text-2xl mb-8 text-blue-500" }, "CONTACT OFFICE"),
                React.createElement('div', { className: "flex flex-col gap-6 items-center" },
                    React.createElement('div', { className: "glass-panel px-8 py-4 rounded-2xl flex items-center gap-4 w-full max-w-sm tilt-card" },
                        React.createElement(Phone, { className: "text-green-500" }),
                        React.createElement('div', { className: "text-left" },
                            React.createElement('a', { href: "tel:9122802016", className: "text-xl font-black block" }, "9122802016"),
                            React.createElement('span', { className: "text-xs text-gray-500" }, "Primary")
                        )
                    ),
                    React.createElement('div', { className: "glass-panel px-8 py-4 rounded-2xl flex items-center gap-4 w-full max-w-sm tilt-card" },
                        React.createElement(Phone, { className: "text-green-500" }),
                        React.createElement('div', { className: "text-left" },
                            React.createElement('a', { href: "tel:8976852604", className: "text-xl font-black block" }, "8976852604"),
                            React.createElement('span', { className: "text-xs text-gray-500" }, "Secondary")
                        )
                    ),
                    React.createElement('div', { className: "flex items-center gap-2 text-gray-400 text-sm" }, React.createElement(Send, {size:16}), React.createElement('a', { href: `mailto:${OWNER_EMAIL}` }, OWNER_EMAIL)),
                    React.createElement('div', { className: "h-48 w-full max-w-md glass-panel rounded-2xl overflow-hidden relative cursor-pointer group mt-4", onClick: () => window.open("https://maps.google.com/?q=Behind+GD+College+Begusarai") },
                        React.createElement('img', { src: "https://images.unsplash.com/photo-1524661135-423995f22d0b?w=800", className: "w-full h-full object-cover opacity-50 group-hover:opacity-70 transition duration-500" }),
                        React.createElement('div', { className: "absolute inset-0 flex items-center justify-center" },
                            React.createElement('div', { className: "bg-black/80 px-6 py-3 rounded-xl border border-white/20 font-bold text-sm tracking-widest flex items-center gap-2" }, 
                                React.createElement(MapPin, {className:"text-red-500"}), "SEE LOCATION IN GOOGLE MAPS"
                            )
                        )
                    )
                ),
                React.createElement('div', { className: "mt-16 text-[10px] font-bold text-gray-700 tracking-[0.5em] uppercase" }, "Safalta Express | 2026")
            )
        );

        // --- APP IMPLEMENTATIONS ---

        const OrbitPlanner = ({ close, user }) => {
            const [tasks, setTasks] = useState([]);
            const [input, setInput] = useState("");
            const [aiLoading, setAiLoading] = useState(false);
            
            useEffect(() => {
                if(user && db) {
                     const q = query(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'tasks'), orderBy('ts', 'desc'));
                     const unsub = onSnapshot(q, s => setTasks(s.docs.map(d=>({id:d.id, ...d.data()}))), e=>console.log('Task offline'));
                     return unsub;
                } else {
                    const local = JSON.parse(localStorage.getItem('safalta_tasks')) || [];
                    setTasks(local);
                }
            }, [user]);

            const generateSchedule = async () => {
                if(!input) return;
                setAiLoading(true);
                const aiRes = await callGemini("Create a short bullet point task list for studying: " + input);
                const newTasks = aiRes.split('\n').filter(t => t.trim().length > 0).map(t => ({ t: t.replace(/^[*-]\s*/, ''), c: false, ts: Date.now() + Math.random() }));
                
                if (user && db) {
                    newTasks.forEach(task => addDoc(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'tasks'), { ...task, ts: serverTimestamp() }));
                } else {
                    const updated = [...tasks, ...newTasks];
                    setTasks(updated);
                    localStorage.setItem('safalta_tasks', JSON.stringify(updated));
                }
                setInput("");
                setAiLoading(false);
            };

            const addTask = async () => {
                if(!input) return;
                const newTask = { t:input, c:false, ts:Date.now() };
                if(user && db) {
                    await addDoc(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'tasks'), { ...newTask, ts: serverTimestamp() });
                } else {
                    const updated = [...tasks, newTask];
                    setTasks(updated);
                    localStorage.setItem('safalta_tasks', JSON.stringify(updated));
                }
                setInput("");
            };

            const toggleTask = async (id, status) => {
                 if(user && db) {
                     await updateDoc(doc(db, 'artifacts', APP_ID, 'users', user.uid, 'tasks', id), { c: !status });
                 } else {
                     const updated = tasks.map(t => t.ts === id ? {...t, c:!t.c} : t);
                     setTasks(updated);
                     localStorage.setItem('safalta_tasks', JSON.stringify(updated));
                 }
            };

            const deleteTask = async (id) => {
                if(user && db) {
                    await deleteDoc(doc(db, 'artifacts', APP_ID, 'users', user.uid, 'tasks', id));
                } else {
                    const updated = tasks.filter(t => t.ts !== id);
                    setTasks(updated);
                    localStorage.setItem('safalta_tasks', JSON.stringify(updated));
                }
            };

            return React.createElement('div', { className: "app-modal p-6" },
                React.createElement('div', { className: "flex justify-between mb-8" }, React.createElement('h2', { className: "font-cyber text-2xl text-blue-400" }, "ORBIT PLANNER (AI)"), React.createElement('button', { onClick: close }, React.createElement(X))),
                React.createElement('div', { className: "space-y-4" },
                    tasks.map((t) => React.createElement('div', { key: t.id || t.ts, className: "glass-panel p-4 rounded-xl flex items-center justify-between" }, 
                        React.createElement('div', { className: "flex items-center gap-3" }, 
                            React.createElement('button', { className: `w-5 h-5 border rounded-full flex items-center justify-center ${t.c ? 'bg-green-500 border-green-500' : 'border-gray-500'}`, onClick: ()=>toggleTask(t.id||t.ts, t.c) }, t.c && React.createElement(Check, {size:12})), 
                            React.createElement('span', { className: `font-bold ${t.c ? 'line-through text-gray-500' : ''}` }, t.t)
                        ), 
                        React.createElement('button', { onClick: ()=>deleteTask(t.id||t.ts), className: "text-red-500" }, React.createElement(Trash2, {size:16}))
                    ))
                ),
                React.createElement('div', { className: "flex gap-2 mt-6" },
                    React.createElement('input', { value:input, onChange:e=>setInput(e.target.value), className: "flex-1 bg-white/10 p-3 rounded-xl outline-none", placeholder: "Add task or ask AI to plan..." }),
                    React.createElement('button', { onClick: generateSchedule, disabled: aiLoading, className: "bg-purple-600 px-4 rounded-xl font-bold" }, aiLoading ? "..." : React.createElement(Sparkles, {size:18})),
                    React.createElement('button', { onClick: addTask, className: "bg-blue-600 px-6 rounded-xl font-bold" }, React.createElement(Plus))
                )
            );
        };

        const MistakeVault = ({ close, user }) => {
            const [mistakes, setMistakes] = useState([]);
            const [title, setTitle] = useState("");
            const [desc, setDesc] = useState("");
            
            useEffect(() => {
                if(user && db) {
                     const q = query(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'mistakes'), orderBy('ts', 'desc'));
                     const unsub = onSnapshot(q, s => setMistakes(s.docs.map(d=>({id:d.id, ...d.data()}))), e=>console.log('Vault offline'));
                     return unsub;
                }
            }, [user]);

            const saveMistake = async () => {
                if(!title || !user || !db) return;
                await addDoc(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'mistakes'), { t:title, d:desc, ts: serverTimestamp() });
                setTitle(""); setDesc("");
            };

            return React.createElement('div', { className: "app-modal p-6" },
                 React.createElement('div', { className: "flex justify-between mb-8" }, React.createElement('h2', { className: "font-cyber text-2xl text-purple-400" }, "MISTAKE VAULT"), React.createElement('button', { onClick: close }, React.createElement(X))),
                 React.createElement('div', { className: "bg-white/5 p-4 rounded-xl mb-6" },
                     React.createElement('input', { value:title, onChange:e=>setTitle(e.target.value), className: "w-full bg-transparent border-b border-white/20 p-2 outline-none mb-2", placeholder: "Mistake Title" }),
                     React.createElement('textarea', { value:desc, onChange:e=>setDesc(e.target.value), className: "w-full bg-transparent p-2 outline-none h-20 text-sm", placeholder: "Description / Link..." }),
                     React.createElement('button', { onClick: saveMistake, className: "w-full bg-purple-600 py-2 rounded-lg font-bold mt-2" }, "SAVE TO VAULT")
                 ),
                 React.createElement('div', { className: "space-y-4" },
                     mistakes.map(m => React.createElement('div', { key:m.id, className: "glass-panel p-4 rounded-xl" },
                         React.createElement('h4', { className: "font-bold text-yellow-400" }, m.t),
                         React.createElement('p', { className: "text-xs text-gray-300 mt-1 whitespace-pre-wrap" }, m.d)
                     ))
                 )
            );
        };

        const ZenithGrowth = ({ close }) => {
            const [custom, setCustom] = useState(25);
            const [time, setTime] = useState(25*60);
            const [active, setActive] = useState(false);
            useEffect(() => {
                let i = null;
                if(active && time > 0) i = setInterval(() => setTime(t=>t-1), 1000);
                else if(time===0) setActive(false);
                return () => clearInterval(i);
            }, [active, time]);
            const fmt = s => `${Math.floor(s/60)}:${s%60<10?'0'+s%60:s%60}`;
            return React.createElement('div', { className: "app-modal p-6 flex flex-col items-center justify-center" },
                React.createElement('button', { onClick: close, className: "absolute top-6 right-6" }, React.createElement(X)),
                React.createElement(Leaf, { size: 64, className: "text-green-500 mb-6" }),
                React.createElement('h2', { className: "font-cyber text-3xl mb-2" }, "ZENITH GROWTH"),
                React.createElement('div', { className: "flex items-center gap-2 mb-4" }, 
                    React.createElement('input', { type:"number", value:custom, onChange:e=>{setCustom(e.target.value); setTime(e.target.value*60)}, className: "bg-white/10 p-2 rounded text-center w-16" }),
                    React.createElement('span', null, "mins")
                ),
                React.createElement('div', { className: "text-6xl font-mono font-bold mb-8 text-green-400" }, fmt(time)),
                React.createElement('button', { onClick: ()=>setActive(!active), className: "bg-green-600 px-10 py-4 rounded-full font-bold text-xl" }, active ? "ABORT" : "PLANT SEED")
            );
        };

        const NeuralNotes = ({ close }) => {
             const [note, setNote] = useState(localStorage.getItem('safalta_notes') || "");
             const save = () => { localStorage.setItem('safalta_notes', note); alert("Saved!"); };
             const savePDF = () => { const el = document.getElementById('note-area'); html2pdf().from(el).save('Notes.pdf'); };
             const summarize = async () => {
                 if(!note) return;
                 const summary = await callGemini("Summarize this note in bullet points: " + note);
                 setNote(note + "\n\n--- AI SUMMARY ---\n" + summary);
             };

             return React.createElement('div', { className: "app-modal p-6" },
                 React.createElement('div', { className: "flex justify-between mb-4" }, React.createElement('h2', { className: "font-cyber text-xl text-yellow-400" }, "NEURAL NOTES"), React.createElement('button', { onClick: close }, React.createElement(X))),
                 React.createElement('textarea', { id: "note-area", value: note, onChange: e=>setNote(e.target.value), className: "w-full h-[60vh] bg-white/5 rounded-xl p-4 outline-none font-mono", placeholder: "Start typing..." }),
                 React.createElement('div', { className: "flex gap-2 mt-4" },
                     React.createElement('button', { onClick: save, className: "flex-1 bg-white/10 py-3 rounded-xl font-bold" }, "SAVE"),
                     React.createElement('button', { onClick: summarize, className: "flex-1 bg-purple-600 py-3 rounded-xl font-bold text-white flex items-center justify-center gap-2" }, React.createElement(Sparkles, {size:16}), "SUMMARIZE"),
                     React.createElement('button', { onClick: savePDF, className: "flex-1 bg-yellow-600 py-3 rounded-xl font-bold text-black" }, "PDF")
                 )
             );
        };

        const SonicCore = ({ close }) => {
            const [playing, setPlaying] = useState(null);
            const audioRef = useRef(new Audio());
            // Updated URL to reliable source (MP3)
            const tracks = [{n:"Deep Focus", u:"https://cdn.pixabay.com/audio/2022/05/27/audio_1808fbf07a.mp3"}, {n:"Rainfall", u:"https://cdn.pixabay.com/audio/2022/07/04/audio_2452e673f9.mp3"}];
            const toggle = (t) => { if(playing===t.n){audioRef.current.pause();setPlaying(null)}else{audioRef.current.src=t.u;audioRef.current.play().catch(e=>console.log(e));setPlaying(t.n)} };
            return React.createElement('div', { className: "app-modal p-6 flex flex-col items-center justify-center" },
                React.createElement('button', { onClick: close, className: "absolute top-6 right-6" }, React.createElement(X)),
                React.createElement(Headphones, { size: 64, className: "text-pink-500 mb-6 animate-pulse" }),
                React.createElement('h2', { className: "font-cyber text-2xl mb-8" }, "SONIC CORE"),
                React.createElement('div', { className: "grid gap-6 w-full max-w-md" }, tracks.map((t,i) => React.createElement('button', { key: i, onClick: ()=>toggle(t), className: `p-6 rounded-2xl font-bold text-xl transition ${playing===t.n?'bg-pink-600':'bg-white/10'}` }, playing===t.n?"PAUSE "+t.n:"PLAY "+t.n)))
            );
        };

        const Whiteboard = ({ close }) => {
             const canvasRef = useRef(null);
             const [isDrawing, setIsDrawing] = useState(false);
             useEffect(() => { const cvs = canvasRef.current; cvs.width = cvs.parentElement.offsetWidth; cvs.height = 400; const ctx = cvs.getContext('2d'); ctx.strokeStyle = '#00f3ff'; ctx.lineWidth = 2; }, []);
             const draw = (e) => { if(!isDrawing) return; const ctx = canvasRef.current.getContext('2d'); const rect = canvasRef.current.getBoundingClientRect(); ctx.lineTo((e.clientX||e.touches[0].clientX)-rect.left, (e.clientY||e.touches[0].clientY)-rect.top); ctx.stroke(); };
             return React.createElement('div', { className: "app-modal p-6" },
                 React.createElement('div', { className: "flex justify-between mb-4" }, React.createElement('h2', { className: "font-cyber text-xl" }, "WHITEBOARD"), React.createElement('button', { onClick: close }, React.createElement(X))),
                 React.createElement('div', { className: "bg-black rounded-xl overflow-hidden touch-none h-[400px] border border-white/10" },
                     React.createElement('canvas', { ref: canvasRef, onMouseDown:(e)=>{setIsDrawing(true);const ctx=canvasRef.current.getContext('2d');ctx.beginPath();ctx.moveTo(e.nativeEvent.offsetX,e.nativeEvent.offsetY)}, onMouseUp:()=>setIsDrawing(false), onMouseMove:(e)=>draw(e.nativeEvent), onTouchStart:(e)=>{setIsDrawing(true);const ctx=canvasRef.current.getContext('2d');const rect=e.target.getBoundingClientRect();ctx.beginPath();ctx.moveTo(e.touches[0].clientX-rect.left,e.touches[0].clientY-rect.top)}, onTouchEnd:()=>setIsDrawing(false), onTouchMove:draw, style:{width:'100%',height:'100%'} })
                 ),
                 React.createElement('button', { onClick:()=>{const cvs=canvasRef.current;cvs.getContext('2d').clearRect(0,0,cvs.width,cvs.height)}, className: "mt-4 text-red-500 font-bold" }, "CLEAR")
             );
        };
        
        const CommunityChat = ({ close, user }) => {
            const [msg, setMsg] = useState('');
            const [chats, setChats] = useState([]);
            useEffect(() => {
                if(!db) return;
                try {
                    const q = query(collection(db, 'artifacts', APP_ID, 'public', 'chat'), orderBy('ts', 'desc'), limit(20));
                    onSnapshot(q, s => setChats(s.docs.map(d => d.data())));
                } catch(e){}
            }, []);
            const send = async () => {
                if(!msg || !user) return;
                await addDoc(collection(db, 'artifacts', APP_ID, 'public', 'chat'), { u:user.displayName, m:msg, ts:serverTimestamp(), i:user.photoURL });
                setMsg('');
            };
            return React.createElement('div', { className: "app-modal p-6 flex flex-col" },
                 React.createElement('div', { className: "flex justify-between mb-4" }, React.createElement('h2', { className: "font-cyber text-xl text-blue-500" }, "GROUP STUDY"), React.createElement('button', { onClick: close }, React.createElement(X))),
                 React.createElement('div', { className: "flex-1 overflow-y-auto flex flex-col-reverse gap-3 mb-4" },
                     chats.map((c,i) => React.createElement('div', { key: i, className: "bg-white/5 p-3 rounded-xl flex gap-3" }, React.createElement('img', { src: c.i, className: "w-8 h-8 rounded-full" }), React.createElement('div', null, React.createElement('p', { className: "text-[10px] font-bold text-blue-300" }, c.u), React.createElement('p', { className: "text-sm" }, c.m))))
                 ),
                 React.createElement('div', { className: "flex gap-2" }, React.createElement('input', { value: msg, onChange: e=>setMsg(e.target.value), className: "flex-1 bg-white/5 rounded-xl px-4 outline-none", placeholder: "Type message..." }), React.createElement('button', { onClick: send, className: "bg-blue-600 p-3 rounded-xl" }, React.createElement(Send, {size:18})))
            );
        };
        
        const NexusLogs = ({close, user}) => {
             const [log, setLog] = useState("");
             const [logs, setLogs] = useState([]);
             useEffect(() => {
                 if(user && db) {
                      const q = query(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'logs'), orderBy('ts', 'desc'));
                      return onSnapshot(q, s => setLogs(s.docs.map(d=>d.data())));
                 }
             }, [user]);
             const save = async () => {
                 if(!log || !user || !db) return;
                 await addDoc(collection(db, 'artifacts', APP_ID, 'users', user.uid, 'logs'), { t:log, ts:serverTimestamp() });
                 setLog("");
             };
             return React.createElement('div', { className: "app-modal p-6" },
                 React.createElement('div', { className: "flex justify-between mb-4" }, React.createElement('h2', { className: "font-cyber text-xl text-green-400" }, "NEXUS LOGS"), React.createElement('button', { onClick: close }, React.createElement(X))),
                 React.createElement('textarea', { value: log, onChange: e=>setLog(e.target.value), className: "w-full h-32 bg-white/5 rounded-xl p-4 outline-none mb-4", placeholder: "Dear Diary..." }),
                 React.createElement('button', { onClick: save, className: "w-full bg-green-600 py-3 rounded-xl font-bold mb-6" }, "LOG ENTRY"),
                 React.createElement('div', { className: "space-y-3" }, logs.map((l,i) => React.createElement('div', { key:i, className: "glass-panel p-3 rounded-xl" }, React.createElement('p', { className: "text-xs text-gray-500 mb-1" }, new Date(l.ts?.toDate()).toLocaleString()), React.createElement('p', null, l.t))))
             );
        };
        
        const FlashForge = ({close}) => {
             const [flipped, setFlipped] = useState(false);
             const [idx, setIdx] = useState(0);
             const [topic, setTopic] = useState("");
             const [cards, setCards] = useState([{q:"Force Formula?", a:"F = ma"}, {q:"Capital of Bihar?", a:"Patna"}, {q:"Pi Value?", a:"3.14"}]);
             const [loading, setLoading] = useState(false);

             const generateCards = async () => {
                if(!topic) return;
                setLoading(true);
                const res = await callGemini(`Generate 5 flashcards for topic: "${topic}". Format exactly like this: Q: Question? A: Answer. | Q: Question? A: Answer. (Keep answers very short)`);
                const newCards = res.split('|').map(s => {
                    const parts = s.split('A:');
                    return { q: parts[0]?.replace('Q:','').trim(), a: parts[1]?.trim() };
                }).filter(c => c.q && c.a);
                
                if(newCards.length > 0) {
                    setCards(newCards);
                    setIdx(0);
                    setFlipped(false);
                }
                setLoading(false);
             };

             return React.createElement('div', { className: "app-modal p-6 flex flex-col items-center justify-center", onClick:()=>setFlipped(!flipped) },
                 React.createElement('button', { onClick: (e)=>{e.stopPropagation();close()}, className: "absolute top-6 right-6" }, React.createElement(X)),
                 React.createElement('h2', { className: "font-cyber text-2xl mb-4" }, "FLASH FORGE AI"),
                 
                 React.createElement('div', { className: "flex gap-2 w-full max-w-sm mb-6", onClick:e=>e.stopPropagation() },
                    React.createElement('input', { value: topic, onChange: e=>setTopic(e.target.value), className: "flex-1 bg-white/10 p-2 rounded-lg outline-none text-sm", placeholder: "Enter Topic (e.g. Thermodynamics)..." }),
                    React.createElement('button', { onClick: generateCards, disabled: loading, className: "bg-yellow-500 text-black px-4 py-2 rounded-lg font-bold text-xs" }, loading ? "..." : "GENERATE")
                 ),

                 React.createElement('div', { className: "h-64 w-full max-w-sm glass-panel rounded-3xl flex items-center justify-center text-2xl font-bold text-center p-6 cursor-pointer tilt-card transition-all duration-500", style: { transform: flipped ? "rotateY(180deg)" : "rotateY(0deg)" } }, 
                    React.createElement('div', { style: { transform: flipped ? "rotateY(180deg)" : "rotateY(0deg)" } }, flipped ? cards[idx].a : cards[idx].q)
                 ),
                 React.createElement('button', { onClick: (e)=>{e.stopPropagation();setIdx((idx+1)%cards.length);setFlipped(false)}, className: "mt-8 bg-white/10 border border-white/20 text-white px-8 py-3 rounded-xl font-bold hover:bg-white/20 transition" }, "NEXT CARD")
             );
        };

        const OmniTutor = ({ close }) => {
            const [input, setInput] = useState("");
            const [chat, setChat] = useState([{r:"ai", t:"System Online. I am Omni Tutor (Mistake Vault Version). Save your errors here!"}]);
            const [loading, setLoading] = useState(false);
            
            const ask = async () => {
                 if(!input) return;
                 // As user requested AI removal for Mistake Vault logic in this version
                 // But now adding AI back as requested
                 setLoading(true);
                 const aiRes = await callGemini("Act as a strict but helpful hostel tutor. Answer this doubt briefly: " + input);
                 setChat([...chat, {r:"u", t:input}, {r:"ai", t:aiRes}]);
                 setInput("");
                 setLoading(false);
            };

            return React.createElement('div', { className: "app-modal p-6 flex flex-col" },
                React.createElement('div', { className: "flex justify-between items-center mb-6" }, React.createElement('h2', { className: "font-cyber text-xl text-purple-400" }, "OMNI TUTOR (AI + VAULT)"), React.createElement('button', { onClick: close }, React.createElement(X))),
                React.createElement('div', { className: "flex-1 overflow-y-auto space-y-4 mb-4" }, 
                    chat.map((c,i) => React.createElement('div', { key: i, className: `p-4 rounded-2xl max-w-[80%] text-sm ${c.r==='ai'?'bg-white/10 mr-auto':'bg-purple-600 ml-auto'}` }, c.t)),
                    loading && React.createElement('div', { className: "text-xs text-gray-500 animate-pulse" }, "AI Thinking...")
                ),
                React.createElement('div', { className: "flex gap-2" }, 
                    React.createElement('input', { value: input, onChange: e=>setInput(e.target.value), className: "flex-1 bg-white/5 rounded-xl px-4 py-3 outline-none", placeholder: "Ask doubt or log mistake..." }), 
                    React.createElement('button', { onClick: ask, disabled: loading, className: "bg-purple-600 p-3 rounded-xl disabled:opacity-50" }, React.createElement(Save, {size:20}))
                )
            );
        };

        const MindFirewall = ({close}) => React.createElement('div', {className:"app-modal p-6 text-center pt-20"}, React.createElement('h2', {className:"font-cyber text-2xl"}, "MIND FIREWALL"), React.createElement('p', {className:"mt-4 text-gray-400"}, "Simulating App Block..."), React.createElement('button', {onClick:close, className:"mt-8 text-red-500"}, "Close"));
        const StatCommand = ({close}) => React.createElement('div', {className:"app-modal p-6 text-center pt-20"}, React.createElement('h2', {className:"font-cyber text-2xl"}, "STAT COMMAND"), React.createElement('p', {className:"mt-4 text-gray-400"}, "Analytics Dashboard"), React.createElement('button', {onClick:close, className:"mt-8 text-red-500"}, "Close"));
        const RankRise = ({close}) => React.createElement('div', {className:"app-modal p-6 text-center pt-20"}, React.createElement('h2', {className:"font-cyber text-2xl"}, "RANK RISE"), React.createElement('p', {className:"mt-4 text-gray-400"}, "Leaderboard System"), React.createElement('button', {onClick:close, className:"mt-8 text-red-500"}, "Close"));
        const VoidLock = ({close}) => React.createElement('div', {className:"app-modal p-6 text-center pt-20"}, React.createElement('h2', {className:"font-cyber text-2xl"}, "VOID LOCK"), React.createElement('p', {className:"mt-4 text-gray-400"}, "Focus Mode Active"), React.createElement('button', {onClick:close, className:"mt-8 text-red-500"}, "Close"));


        const App = () => {
            const [user, setUser] = useState(null);
            const [menuOpen, setMenuOpen] = useState(false);
            const [activeApp, setActiveApp] = useState(null);
            
            useEffect(() => { 
                if(document.getElementById('loader')) document.getElementById('loader').style.display='none'; 
                if(auth) onAuthStateChanged(auth, setUser);
                
                const obs = new IntersectionObserver(e => e.forEach(x => {
                    if(x.isIntersecting) x.target.classList.add('visible');
                }), {threshold: 0.1});
                document.querySelectorAll('.scroll-reveal').forEach(x => { x.classList.add('scroll-reveal'); obs.observe(x); });
            }, []);

            const login = async () => { try { await signInWithPopup(auth, googleProvider); } catch {} };
            const logout = async () => { await signOut(auth); };

            return React.createElement('div', { className: "min-h-screen pb-20" },
                React.createElement(Navbar, { user, login, toggleSidebar:()=>setMenuOpen(true) }),
                React.createElement(Sidebar, { isOpen:menuOpen, close:()=>setMenuOpen(false), user, logout, openApp:setActiveApp }),
                React.createElement(Hero),
                React.createElement(LegacySection),
                React.createElement(FoodMenu),
                React.createElement(RoomSection),
                React.createElement(Booking),
                React.createElement(Footer),
                
                // MODALS
                activeApp === 'detox' && React.createElement(MindFirewall, { close:()=>setActiveApp(null) }),
                activeApp === 'planner' && React.createElement(OrbitPlanner, { close:()=>setActiveApp(null), user }),
                activeApp === 'forest' && React.createElement(ZenithGrowth, { close:()=>setActiveApp(null) }),
                activeApp === 'music' && React.createElement(SonicCore, { close:()=>setActiveApp(null) }),
                activeApp === 'omni' && React.createElement(OmniTutor, { close:()=>setActiveApp(null) }),
                activeApp === 'whiteboard' && React.createElement(Whiteboard, { close:()=>setActiveApp(null) }),
                activeApp === 'notes' && React.createElement(NeuralNotes, { close:()=>setActiveApp(null) }),
                activeApp === 'chat' && React.createElement(CommunityChat, { close:()=>setActiveApp(null), user }),
                activeApp === 'ledger' && React.createElement(NexusLogs, { close:()=>setActiveApp(null), user }),
                activeApp === 'flash' && React.createElement(FlashForge, { close:()=>setActiveApp(null) }),
                activeApp === 'stats' && React.createElement(StatCommand, { close:()=>setActiveApp(null) }),
                activeApp === 'rank' && React.createElement(RankRise, { close:()=>setActiveApp(null) }),
                activeApp === 'lock' && React.createElement(VoidLock, { close:()=>setActiveApp(null) }),
                activeApp === 'mistake' && React.createElement(MistakeVault, { close:()=>setActiveApp(null), user })
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
