<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safalta Express 7.0 | Student Command Center</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Orbitron:wght@500;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --neon: #66fcf1;
            --dark: #0b0c10;
            --gray: #1f2833;
            --glass: rgba(31, 40, 51, 0.7);
        }

        body { background: var(--dark); color: white; font-family: 'Outfit', sans-serif; overflow-x: hidden; }
        .font-cyber { font-family: 'Orbitron', sans-serif; }
        .font-code { font-family: 'JetBrains Mono', monospace; }

        /* Particle Animation Setup */
        #particles {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1; background: radial-gradient(circle at center, #1f2833 0%, #0b0c10 100%);
        }
        
        /* Dashboard Card */
        .dash-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(102, 252, 241, 0.1);
            transition: 0.3s;
        }
        .dash-card:hover {
            border-color: var(--neon);
            box-shadow: 0 0 20px rgba(102, 252, 241, 0.1);
        }

        /* Chat Animations */
        .msg-enter { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from { opacity: 0; transform: translateY(10px) scale(0.9); } to { opacity: 1; transform: translateY(0) scale(1); } }

        /* Typing Indicator */
        .typing-dot { animation: wave 1.3s linear infinite; }
        .typing-dot:nth-child(2) { animation-delay: -1.1s; }
        .typing-dot:nth-child(3) { animation-delay: -0.9s; }
        @keyframes wave { 0%, 60%, 100% { transform: initial; } 30% { transform: translateY(-5px); } }
    </style>

    <script type="importmap">
        {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.344.0?external=react"
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import ReactDOM from 'react-dom/client';
        import { 
            MessageSquare, Wrench, FileText, Download, 
            Send, X, CheckCircle, AlertTriangle, 
            Database, Shield, Terminal
        } from 'lucide-react';

        // --- COMPONENTS ---

        // 1. Complaint Portal (Ticket System)
        const ComplaintPortal = () => {
            const [status, setStatus] = useState('idle'); // idle, loading, success
            const [ticket, setTicket] = useState(null);
            const [category, setCategory] = useState('Electricity');

            const handleSubmit = (e) => {
                e.preventDefault();
                setStatus('loading');
                // Fake server delay
                setTimeout(() => {
                    const randomTicket = "TKT-" + Math.floor(1000 + Math.random() * 9000);
                    setTicket(randomTicket);
                    setStatus('success');
                }, 1500);
            };

            return React.createElement('div', { className: "dash-card p-6 rounded-2xl h-full" },
                React.createElement('h3', { className: "font-cyber text-xl mb-6 text-[var(--neon)] flex items-center gap-2" }, 
                    React.createElement(Wrench, { size: 20 }), "MAINTENANCE CONSOLE"
                ),
                
                status === 'success' ? React.createElement('div', { className: "text-center py-8 msg-enter" },
                    React.createElement(CheckCircle, { size: 48, className: "text-green-500 mx-auto mb-4" }),
                    React.createElement('h4', { className: "text-xl font-bold mb-2" }, "Request Logged"),
                    React.createElement('div', { className: "bg-white/5 p-4 rounded-lg inline-block border border-[var(--neon)]" },
                        React.createElement('p', { className: "text-xs text-gray-400 uppercase" }, "Ticket ID"),
                        React.createElement('p', { className: "font-code text-2xl text-[var(--neon)]" }, ticket)
                    ),
                    React.createElement('p', { className: "text-sm text-gray-400 mt-4" }, "The warden has been notified."),
                    React.createElement('button', { onClick: () => setStatus('idle'), className: "mt-6 text-sm underline" }, "File Another")
                ) : React.createElement('form', { onSubmit: handleSubmit, className: "space-y-4" },
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-xs font-bold text-gray-500 mb-1" }, "ISSUE CATEGORY"),
                        React.createElement('select', { 
                            className: "w-full bg-black/40 border border-white/10 rounded-lg p-3 text-sm focus:border-[var(--neon)] outline-none transition",
                            value: category, onChange: (e) => setCategory(e.target.value)
                        },
                            ['Electricity', 'Plumbing', 'WiFi Issue', 'Food Quality', 'Cleaning'].map(o => React.createElement('option', { key: o, value: o }, o))
                        )
                    ),
                    React.createElement('div', null,
                        React.createElement('label', { className: "block text-xs font-bold text-gray-500 mb-1" }, "DESCRIPTION"),
                        React.createElement('textarea', { 
                            className: "w-full bg-black/40 border border-white/10 rounded-lg p-3 text-sm h-24 focus:border-[var(--neon)] outline-none transition",
                            placeholder: "Describe the issue..."
                        })
                    ),
                    React.createElement('button', { 
                        type: "submit",
                        disabled: status === 'loading',
                        className: "w-full bg-[var(--neon)] hover:bg-white text-black font-bold py-3 rounded-lg transition flex justify-center items-center gap-2"
                    }, status === 'loading' ? "PROCESSING..." : "GENERATE TICKET")
                )
            );
        };

        // 2. Resource Vault (Study Material)
        const ResourceVault = () => {
            const files = [
                { name: "JEE Mains 2024 - Physics PYQ", size: "12 MB" },
                { name: "H.C. Verma Solutions Vol 1", size: "45 MB" },
                { name: "Organic Chemistry Mindmap", size: "2.4 MB" },
                { name: "Hostel Rules & Regulations", size: "0.5 MB" }
            ];

            return React.createElement('div', { className: "dash-card p-6 rounded-2xl h-full" },
                React.createElement('h3', { className: "font-cyber text-xl mb-6 text-[var(--neon)] flex items-center gap-2" }, 
                    React.createElement(Database, { size: 20 }), "RESOURCE VAULT"
                ),
                React.createElement('div', { className: "space-y-3" },
                    files.map((f, i) => 
                        React.createElement('div', { key: i, className: "flex items-center justify-between p-3 bg-white/5 rounded-lg group hover:bg-white/10 transition cursor-pointer" },
                            React.createElement('div', { className: "flex items-center gap-3" },
                                React.createElement(FileText, { size: 18, className: "text-gray-400 group-hover:text-[var(--neon)]" }),
                                React.createElement('div', null,
                                    React.createElement('p', { className: "text-sm font-bold text-gray-200" }, f.name),
                                    React.createElement('p', { className: "text-[10px] text-gray-500 font-code" }, f.size)
                                )
                            ),
                            React.createElement(Download, { size: 16, className: "text-gray-500 group-hover:text-white" })
                        )
                    )
                ),
                React.createElement('div', { className: "mt-6 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg flex gap-3" },
                    React.createElement(AlertTriangle, { className: "text-yellow-500", size: 20 }),
                    React.createElement('p', { className: "text-xs text-yellow-500" }, "Access restricted to hostel residents. Don't share externally.")
                )
            );
        };

        // 3. AI Chat Bot
        const ChatBot = () => {
            const [open, setOpen] = useState(false);
            const [msgs, setMsgs] = useState([
                { sender: 'bot', text: 'Hello! I am SE-Bot. Ask me about WiFi, Fees, or Food.' }
            ]);
            const [input, setInput] = useState('');
            const [typing, setTyping] = useState(false);
            const scrollRef = useRef(null);

            useEffect(() => {
                if(scrollRef.current) scrollRef.current.scrollTop = scrollRef.current.scrollHeight;
            }, [msgs, typing]);

            const handleSend = () => {
                if(!input.trim()) return;
                const userMsg = input;
                setMsgs(prev => [...prev, { sender: 'user', text: userMsg }]);
                setInput('');
                setTyping(true);

                // Bot Logic
                setTimeout(() => {
                    let reply = "I didn't understand. Try 'Food', 'WiFi' or 'Contact'.";
                    const lower = userMsg.toLowerCase();
                    if(lower.includes('wifi') || lower.includes('net')) reply = "WiFi ID: Safalta_5G | Pass: student@2025";
                    else if(lower.includes('fee') || lower.includes('money')) reply = "Current Rent is â‚¹4000/month including Mess & Electricity.";
                    else if(lower.includes('food') || lower.includes('menu')) reply = "Check the 'Visual Menu' section for today's special.";
                    else if(lower.includes('hi') || lower.includes('hello')) reply = "Hey there! How can I help you settle in?";

                    setMsgs(prev => [...prev, { sender: 'bot', text: reply }]);
                    setTyping(false);
                }, 1000);
            };

            return React.createElement('div', { className: "fixed bottom-6 right-6 z-50 flex flex-col items-end" },
                open && React.createElement('div', { className: "bg-[#0b0c10] border border-[var(--neon)] w-80 h-96 rounded-2xl mb-4 shadow-2xl flex flex-col overflow-hidden msg-enter" },
                    // Header
                    React.createElement('div', { className: "bg-[var(--neon)] text-black p-4 font-bold flex justify-between items-center" },
                        React.createElement('span', { className: "flex items-center gap-2" }, React.createElement(Terminal, { size: 16 }), "SE-SUPPORT v2.1"),
                        React.createElement(X, { className: "cursor-pointer", onClick: () => setOpen(false), size: 18 })
                    ),
                    // Body
                    React.createElement('div', { className: "flex-1 p-4 overflow-y-auto space-y-3 bg-black/50", ref: scrollRef },
                        msgs.map((m, i) => 
                            React.createElement('div', { key: i, className: `flex ${m.sender === 'user' ? 'justify-end' : 'justify-start'}` },
                                React.createElement('div', { className: `max-w-[80%] p-3 rounded-xl text-sm ${m.sender === 'user' ? 'bg-[var(--neon)] text-black rounded-tr-none' : 'bg-gray-800 text-white rounded-tl-none'}` }, m.text)
                            )
                        ),
                        typing && React.createElement('div', { className: "flex gap-1 bg-gray-800 p-3 rounded-xl w-16" },
                            React.createElement('div', { className: "w-2 h-2 bg-gray-500 rounded-full typing-dot" }),
                            React.createElement('div', { className: "w-2 h-2 bg-gray-500 rounded-full typing-dot" }),
                            React.createElement('div', { className: "w-2 h-2 bg-gray-500 rounded-full typing-dot" })
                        )
                    ),
                    // Input
                    React.createElement('div', { className: "p-3 bg-gray-900 flex gap-2" },
                        React.createElement('input', { 
                            className: "flex-1 bg-black border border-gray-700 rounded-lg px-3 py-2 text-sm text-white focus:border-[var(--neon)] outline-none",
                            placeholder: "Type a command...",
                            value: input,
                            onChange: (e) => setInput(e.target.value),
                            onKeyDown: (e) => e.key === 'Enter' && handleSend()
                        }),
                        React.createElement('button', { onClick: handleSend, className: "text-[var(--neon)]" }, React.createElement(Send, { size: 20 }))
                    )
                ),
                
                // Trigger Button
                React.createElement('button', { 
                    onClick: () => setOpen(!open),
                    className: "bg-[var(--neon)] hover:bg-white text-black p-4 rounded-full shadow-[0_0_20px_rgba(102,252,241,0.5)] transition-all hover:scale-110"
                }, open ? React.createElement(X, { size: 24 }) : React.createElement(MessageSquare, { size: 24 }))
            );
        };

        const App = () => {
            return React.createElement('div', { className: "min-h-screen relative p-4 md:p-8" },
                React.createElement('div', { id: "particles" }),
                
                // Header
                React.createElement('header', { className: "max-w-7xl mx-auto mb-12 flex justify-between items-end" },
                    React.createElement('div', null,
                        React.createElement('p', { className: "font-code text-[var(--neon)] text-xs mb-2" }, "/// SYSTEM ACCESS GRANTED"),
                        React.createElement('h1', { className: "font-cyber text-4xl md:text-6xl font-bold" }, "COMMAND CENTER")
                    ),
                    React.createElement('div', { className: "text-right hidden md:block" },
                        React.createElement('p', { className: "text-gray-400 text-sm" }, "Status: Operational"),
                        React.createElement('p', { className: "font-code text-xl font-bold" }, "12:42 PM IST")
                    )
                ),

                // Main Dashboard Grid
                React.createElement('div', { className: "max-w-7xl mx-auto grid lg:grid-cols-2 gap-8" },
                    React.createElement(ComplaintPortal),
                    React.createElement(ResourceVault)
                ),

                React.createElement(ChatBot)
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(App));
    </script>
</body>
</html>
